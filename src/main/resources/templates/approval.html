<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta name="description" content="">
    <div th:replace="fragments/headerE::header-css"></div>
</head>
<style type="text/css">
    .h-divider{
        margin-top:5px;
        margin-bottom:5px;
        height:1px;
        width:100%;
        border-top:1px solid gray;
    }
</style>
<body id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
        <div th:replace="fragments/headerE::sidebar"></div>    
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content">
                <div th:replace="fragments/headerE::topnav"></div>
                <!-- Begin Page Content -->
                <div class="container-fluid">
                    <br>
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">MOM - Need Approval</h6>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>No</th> 
                                            <th hidden="">ID</th> 
                                            <th hidden="">Meeting Desc</th>
                                            <th hidden="">Meeting Id</th>
                                            <th>Meeting</th>
                                            <th>Date</th>
                                            <th hidden="">Time</th>
                                            <th hidden="">Location</th>
                                            <th hidden="">Status Name</th>
                                            <th hidden="">Status Id</th>
                                            <th hidden="">Manager Id</th>
                                            <th hidden="">Manager Name</th>
                                            <th hidden="">Manager Last Name</th>
                                            <th>PIC</th>
                                            <th hidden="">PIC Last Name</th>
                                            <th hidden="">PIC ID</th>
                                            <th hidden="">PIC Email</th>
                                            <th hidden="">Customer Id</th>
                                            <th>Customer Name</th>
                                            <th hidden="">Customer Pic</th>
                                            <th hidden="">Customer Email</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tfoot>
                                        <tr>
                                            <th>No</th> 
                                            <th hidden="">ID</th> 
                                            <th hidden="">Meeting Desc</th>
                                            <th hidden="">Meeting Id</th>
                                            <th>Meeting</th>
                                            <th>Date</th>
                                            <th hidden="">Time</th>
                                            <th hidden="">Location</th>
                                            <th hidden="">Status Name</th>
                                            <th hidden="">Status Id</th>
                                            <th hidden="">Manager Id</th>
                                            <th hidden="">Manager Name</th>
                                            <th hidden="">Manager Last Name</th>
                                            <th>PIC</th>
                                            <th hidden="">PIC Last Name</th>
                                            <th hidden="">PIC ID</th>
                                            <th hidden="">PIC Email</th>
                                            <th hidden="">Customer Id</th>
                                            <th >Customer Name</th>
                                            <th hidden="">Customer Pic</th>
                                            <th hidden="">Customer Email</th>
                                            <th>Action</th>
                                        </tr>
                                    </tfoot>
                                    <tbody>
                                        <tr th:each=" mom,no : ${mom}" >
                                            <td id="no" th:text="${no.count}"></td>
                                            <td  hidden="" id="id" th:text="${mom.id}"></td>
                                            <td hidden="" id="desc" th:text="${mom.meetingdesc}"></td>
                                            <td  hidden="" id="meetingId" th:text="${mom.meeting.id}"></td>
                                            <td id="meetingName" th:text="${mom.meeting.name}"></td>
                                            <td id="date" th:text="${mom.meeting.date}"></td>
                                            <td hidden="" id="time" th:text="${mom.meeting.time}"></td>
                                            <td hidden="" id="location" th:text="${mom.meeting.location}"></td>
                                            <td hidden="" id="statusName" th:text="${mom.status.name}"></td>
                                            <td hidden="" id="statusId" th:text="${mom.status.id}"></td>
                                            <td hidden="" id="managerId" th:text="${mom.meeting.manager.id}"></td>
                                            <td hidden="" id="managerName" th:text="${mom.meeting.manager.name}"></td>
                                            <td hidden="" id="managerLastName" th:text="${mom.meeting.manager.lastname}"></td>
                                            <td  id="picName" th:text="${mom.meeting.pic.name}"></td>
                                            <td hidden="" id="picLastName" th:text="${mom.meeting.pic.lastname}"></td>
                                            <td hidden="" id="picId" th:text="${mom.meeting.pic.id}"></td>
                                            <td hidden="" id="picEmail" th:text="${mom.meeting.pic.email}"></td>
                                            <td hidden="" id="custId" th:text="${mom.meeting.customer.id}"></td>
                                            <td  id="custName" th:text="${mom.meeting.customer.name}"></td>
                                            <td hidden="" id="custPic" th:text="${mom.meeting.customer.pic}"></td>
                                            <td hidden="" id="custEmail" th:text="${mom.meeting.customer.email}"></td>
                                            <td>                                                   
                                                <button data-target="#modalDetail" data-toggle="modal" type="button" class="btn btn-sm btn-outline-primary">
                                                    <span class="icon">
                                                        <i class="fas fa-check-circle"></i>
                                                    </span>
                                                </button>
                                                <button data-target="#modalPrint" data-toggle="modal" taype="button" class="btn btn-sm btn-outline-primary">
                                                    <span class="icon">
                                                        <i class="fas fa-print"></i>
                                                    </span>
                                                </button>
                                                <button data-target="#modalEmail" data-toggle="modal" taype="button" class="btn btn-sm btn-outline-primary">
                                                    <span class="icon">
                                                        <i class="fas fa-paper-plane"></i>
                                                    </span>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Modal Insert-->
                        <div class="modal fade" id="modalPrint" role="dialog">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <h4 class="modal-title">Report for Customer</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <!-- Modal Body -->
                                    <div class="modal-body">
                                        <form th:action="@{/manager/report}" method="POST" class="form-horizontal" role="form">
                                            <div class="col-sm-12">
                                                <input type="text" id="modalId" name="id" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalMeetingId" name="meetingId" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-12 col-sm-offset-2">
                                                    <button type="submit" class="btn btn-sm btn-outline-primary">Get Report</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <!-- Modal Footer -->
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--End of Modal Insert-->

                        <!--Modal Detail MOM-->
                        <div class="modal fade" id="modalDetail" role="dialog">
                            <div class="modal-dialog modal-dialog-centered" style="min-width: 65%;">
                                <div class="modal-content" style="min-height: 70vh;">
                                    <!--Modal Header--> 
                                    <div class="modal-header">
                                        <h4 class="modal-title">MOM Details</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <!--Modal Body--> 
                                    <div class="modal-body">
                                        <form th:action="@{/manager/approval/update}" method="POST" class="form-horizontal" role="form">
                                            <div class="col-sm-12">
                                                <input type="text" id="modalId" name="id" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalMeetingId" name="meetingId" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalStatusId" name="statusId" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalStatusName" name="statusName" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalManagerId" name="managerId" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalManagerName" name="managerName" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalManagerLastName" name="managerLastName" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalPicId" name="picId" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalPicName" name="picName" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalPicLastName" name="picLastName" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalPicEmail" name="picEmail" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalDate" name="date" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalTime" name="time" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="col-sm-12">
                                                <input type="text" id="modalLocation" name="location" class="form-control" value="" required="required" readonly="">
                                            </div>
                                            <div class="form-group">
                                                <label for="input" class="col-sm control-label">Meeting</label>
                                                <div class="col-sm-12">
                                                    <input type="text" id="modalMeetingName" name="meetingName" class="form-control" value="" required="required" readonly="">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="input" class="col-sm control-label">Meeting Description</label>
                                                <div class="col-sm-12">
                                                    <textarea id="modalDesc" name="desc" class="form-control" rows="7" readonly=""></textarea>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="input" class="col-sm control-label">Meeting Follow Up</label>
                                                <div align="center" >
                                                    <table  class="table table-striped table-bordered" style="width: 100%" id="roleTable">
                                                        <thead>
                                                            <tr>
                                                                <th>No</th>
                                                                <th>Follow Up</th>
                                                                <th>Target Date</th>
                                                                <th>Notes</th>
                                                                <th>PIC</th>
                                                                <th hidden="">MOM</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>

                                                            <tr th:each=" followup,no : ${followup}" >
                                                                <td th:text="${no.count}"></td>
                                                                <td id="name" th:text="${followup.name}"></td>
                                                                <td id="attendees" th:text="${followup.targetdate}"></td>
                                                                <td id="fd" th:text="${followup.notes}"></td>
                                                                <td id="fdd" th:text="${followup.pic.name}"></td>
                                                                <td hidden="" th:text="${followup.mom.id}"></td>

                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="form-group" align="right">
                                                <label for="input" class="col-sm control-label">Note</label>
                                                <div class="col-sm-12">
                                                    <textarea id="modalNote" name="note" class="form-control" rows="5"></textarea>
                                                </div>
                                            </div>

                                            <br>

                                            <div class="form-group">
                                                <div class="col-sm-12 col-sm-offset-2" align="right">

                                                    <input type="submit" name="status" value="Approve"  class="btn btn-sm btn-outline-primary">
                                                    <input type="submit" name="status" value="Reject" class="btn btn-sm btn-outline-danger">
                                                </div>
                                            </div>
                                        </form>


                                    </div>

                                    <!--Modal Footer--> 
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--End of Edit Mom-->

                        <!-- Modal Insert-->
<!--                        <div class="modal fade" id="modalNotes" role="dialog">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                     Modal Header 
                                    <div class="modal-header">
                                        <h4 class="modal-title">Form Role</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                     Modal Body 
                                    <div class="modal-body">

                                    </div>
                                     Modal Footer 
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>-->
                        <!--End of Modal Insert-->

                    </div>
                </div>
                <!-- /.container-fluid -->  
            </div>
            <!-- End of Main Content -->
            <div th:replace="fragments/headerE::footer"></div>
        </div>
        <!-- End of Content Wrapper -->
    </div>
    <!-- End of Page Wrapper -->
    <div th:replace="fragments/footer::footer"></div>

    <script>
        $('#modalDetail').on('show.bs.modal', function (e) {
            var _button = $(e.relatedTarget);
            var _row = _button.parents("tr");

            var _id = _row.find("#id").text();
            var _desc = _row.find("#desc").text();
            var _meetingId = _row.find("#meetingId").text();
            var _meetingName = _row.find("#meetingName").text();
            var _statusId = _row.find("#statusId").text();
            var _statusName = _row.find("#statusName").text();
            var _managerId = _row.find("#managerId").text();
            var _managerName = _row.find("#managerName").text();
            var _managerLastName = _row.find("#managerLastName").text();
            var _picId = _row.find("#picId").text();
            var _picName = _row.find("#picName").text();
            var _picLastName = _row.find("#picLastName").text();
            var _picEmail = _row.find("#picEmail").text();
            var _date = _row.find("#date").text();
            var _time = _row.find("#time").text();
            var _location = _row.find("#location").text();

    //                    alert(_id);
            $(this).find('#modalId').val(_id);
            $(this).find('#modalDesc').val(_desc);
            $(this).find('#modalMeetingId').val(_meetingId);
            $(this).find('#modalMeetingName').val(_meetingName);
            $(this).find('#modalStatusId').val(_statusId);
            $(this).find('#modalStatusName').val(_statusName);
            $(this).find('#modalManagerId').val(_managerId);
            $(this).find('#modalManagerName').val(_managerName);
            $(this).find('#modalManagerLastName').val(_managerLastName);
            $(this).find('#modalPicId').val(_picId);
            $(this).find('#modalPicName').val(_picName);
            $(this).find('#modalPicLastName').val(_picLastName);
            $(this).find('#modalPicEmail').val(_picEmail);
            $(this).find('#modalDate').val(_date);
            $(this).find('#modalTime').val(_time);
            $(this).find('#modalLocation').val(_location);
        });
    </script>

    <script>
        $('#modalFollowup').on('show.bs.modal', function (e) {
            var _button = $(e.relatedTarget);
            var _row = _button.parents("tr");

            var _id = _row.find("#id").text();
            var _meetingName = _row.find("#meetingName").text();

//                    alert(_id);
            $(this).find('#modalMomId').val(_id);
            $(this).find('#modalMeeting').val(_meetingName);
        });
    </script>
    <script>
        $('#modalPrint').on('show.bs.modal', function (e) {
            var _button = $(e.relatedTarget);
            var _row = _button.parents("tr");

            var _id = _row.find("#id").text();
            var _meetingId = _row.find("#meetingId").text();

//                    alert(_id);
            $(this).find('#modalId').val(_id);
            $(this).find('#modalMeetingId').val(_meetingId);
        });
    </script>

</body>
</html>
